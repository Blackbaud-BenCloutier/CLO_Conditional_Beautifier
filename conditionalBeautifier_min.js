var CB={beautify:function(){CB.createArray();CB.format();document.getElementById("text").value=CB.text;CB.clear()},clear:function(){CB.colonStack=[];CB.condArray=[];CB.tabLevel=[];CB.text="";CB.typeStack=[]},colonStack:[],condArray:[],createArray:function(){var e=/\[\[\?/g,t,n=/\[\[[^\?]/g,r,i=/::/g,s,o=/\]\]/g,u;CB.text=document.getElementById("text").value.replace(/[\t\n]/g,"").replace(/  /g,"");while((t=e.exec(CB.text))!==null){CB.condArray.push(t.index+"q")}while((r=n.exec(CB.text))!==null){CB.condArray.push(r.index+"b")}while((s=i.exec(CB.text))!==null){CB.condArray.push(s.index+"c")}while((u=o.exec(CB.text))!==null){CB.condArray.push(u.index+"e")}CB.condArray.sort(function(e,t){return parseInt(e)-parseInt(t)})},format:function(){var e=0;for(;e<CB.condArray.length;e++){var t=parseInt(CB.condArray[e]),n=CB.getLastElement(CB.condArray[e]);switch(n){case"q":if(t!==0){t+=CB.insert(CB.tabLevel,t)}CB.tabLevel++;CB.typeStack.push("q");CB.colonStack.push(0);break;case"b":CB.typeStack.push("b");break;case"c":var r=CB.getLastElement(CB.colonStack,"increment");if(r===2){if(!(("c"===CB.getLastElement(CB.condArray[e+1])||"q"===CB.getLastElement(CB.condArray[e+1]))&&t+2===parseInt(CB.condArray[e+1]))){t+=CB.insert(CB.tabLevel,t+2)}}if(r===3){t+=CB.insert(CB.tabLevel-1,t);if(!(("e"===CB.getLastElement(CB.condArray[e+1])||"q"===CB.getLastElement(CB.condArray[e+1]))&&t+2===parseInt(CB.condArray[e+1]))){t+=CB.insert(CB.tabLevel,t+2)}CB.colonStack.pop()}break;case"e":if(CB.getLastElement(CB.typeStack)==="q"){if(!("c"===CB.getLastElement(CB.condArray[e-1])&&t-2===parseInt(CB.condArray[e-1]))){t+=CB.insert(CB.tabLevel-1,t)}CB.tabLevel--}CB.typeStack.pop();break;default:break}}},getLastElement:function(e,t){if(t){e[e.length-1]++}return e[e.length-1]},insert:function(e,t){var n="";n+="\n";for(var r=0;r<e;r++){n+="    "}CB.text=CB.text.substring(0,t)+n+CB.text.substring(t,CB.text.length);for(var r=0;r<CB.condArray.length;r++){var i=parseInt(CB.condArray[r]),s=CB.getLastElement(CB.condArray[r]);if(i>=t){CB.condArray[r]=i+n.length+s}}return n.length},tabLevel:0,text:"",typeStack:[],uglify:function(){document.getElementById("text").value=document.getElementById("text").value.replace(/[\t\n]/g,"").replace(/  /g,"")}}